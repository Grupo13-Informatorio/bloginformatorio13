{% extends "index.html"%}
{% block title %} Blog G13 - Perfil {{usuario}} {% endblock %}
{% block contenido %}
<section class="call-to-action">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="main-content">
          <div class="row">
            <div class="col-lg-8">
              <span>PERFIL</span>
              <h4>Estas viendo el perfil de: <em>{{usuario}}</em></h4>
            </div>
            <div class="col-lg-4">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<section class="blog-posts">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="blog-posts">
          <div class="row">
            <div class="col-lg-12">
              <div class="sidebar-item submit-comment">
                <div class="content">
                  <div class="row">
                    <div class="col-6">
                      <form method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        {{form.as_p}}
                        {{form.non_field_errors}}
                        <input type="hidden" value="{{ next }}" name="next">
                        <button type="submit" style="width:100%;" >Actualizar perfil</button>
                      </form>
                    </div>
                    <div class="col-6">
                      <p class="">Foto de perfil:</p>
                      <div class="image-container">
                        <img id="imagePreviewOne" class="" style="display:none;"/>
                        <img id="id_foto_actual" src="{{usuario.foto_perfil.url}}"/>
                    </div>
                  </div>
                  <hr>
                  <a href="{% url 'inicio' %}">volver</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<script>
  id_foto_perfil.onchange = evt => {
  imagePreviewOne.style.display = "block";
  id_foto_actual.style.display = "none"
  const [file] = id_foto_perfil.files
  console.log(id_foto_perfil.files)
  if (file) {
    imagePreviewOne.src = URL.createObjectURL(file)
  } else {
    imagePreviewOne.style.display = "none";
  }
}
</script>
{% endblock %}